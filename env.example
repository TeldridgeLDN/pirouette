# ================================================================
# Pirouette Environment Variables Template
# ================================================================
# Copy this file to .env.local for local development
# Never commit .env.local to git!
# 
# For production deployment:
#   - Vercel: Add these in project settings → Environment Variables
#   - Railway: Add these in project settings → Variables
# ================================================================

# ================================================================
# SUPABASE (Database & Storage)
# ================================================================
# Get these from: https://supabase.com/dashboard → Settings → API

# Public variables (safe to expose in browser)
NEXT_PUBLIC_SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here

# Service Role Key (⚠️ NEVER expose to browser!)
# Used in API routes and Railway worker
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# ================================================================
# CLERK (Authentication)
# ================================================================
# Get these from: https://clerk.com/dashboard → API Keys

# Public variables
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_xxxxx
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard

# Secret key (server-side only)
CLERK_SECRET_KEY=sk_test_xxxxx

# Webhook secret (for syncing users to Supabase)
CLERK_WEBHOOK_SECRET=whsec_xxxxx

# ================================================================
# STRIPE (Payments)
# ================================================================
# Get these from: https://dashboard.stripe.com/apikeys

# Public key (safe to expose)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx

# Secret key (server-side only)
STRIPE_SECRET_KEY=sk_test_xxxxx

# Webhook secret (for handling subscription events)
STRIPE_WEBHOOK_SECRET=whsec_xxxxx

# Product/Price IDs (from Stripe Dashboard → Products)
STRIPE_PRO_29_PRICE_ID=price_xxxxx
STRIPE_PRO_49_PRICE_ID=price_xxxxx
STRIPE_AGENCY_PRICE_ID=price_xxxxx

# ================================================================
# RAILWAY (Analysis Worker)
# ================================================================
# Shared secret for authenticated requests between Vercel <-> Railway

RAILWAY_SECRET=your_strong_random_secret_here
# Generate with: openssl rand -hex 32

# ================================================================
# REDIS (BullMQ Job Queue)
# ================================================================
# Railway automatically provides this as REDIS_URL
# For local development, use a local Redis instance:

# REDIS_URL=redis://localhost:6379

# ================================================================
# ANALYTICS (Optional)
# ================================================================
# Plausible Analytics (privacy-friendly, no cookies)
# Get from: https://plausible.io/settings

NEXT_PUBLIC_PLAUSIBLE_DOMAIN=pirouette.app
# NEXT_PUBLIC_PLAUSIBLE_API_HOST=https://plausible.io  # Optional for self-hosted

# ================================================================
# MONITORING (Optional)
# ================================================================
# Sentry for error tracking
# Get from: https://sentry.io → Settings → Projects → Client Keys

# NEXT_PUBLIC_SENTRY_DSN=https://xxxxx@sentry.io/xxxxx
# SENTRY_ORG=your-org
# SENTRY_PROJECT=pirouette

# ================================================================
# NEXT.JS CONFIGURATION
# ================================================================

# NODE_ENV=development  # Set automatically by Next.js
# NEXT_PUBLIC_APP_URL=http://localhost:3000  # Your app URL

# ================================================================
# RATE LIMITING (Optional)
# ================================================================
# Upstash Redis for rate limiting
# Get from: https://console.upstash.com

# UPSTASH_REDIS_REST_URL=https://xxxxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=xxxxx

# ================================================================
# NOTES
# ================================================================
# 
# Variable Naming Convention:
# - NEXT_PUBLIC_* = Exposed to browser (safe for frontend)
# - No prefix = Server-side only (API routes, Railway worker)
# 
# Security Checklist:
# ✅ Never commit .env.local to git
# ✅ Add .env.local to .gitignore
# ✅ Never use NEXT_PUBLIC_ prefix for secrets
# ✅ Rotate keys regularly (especially after team changes)
# ✅ Use different keys for dev/staging/production
# 
# Testing:
# - Copy this file to .env.local
# - Replace all placeholder values
# - Run: npm run dev
# - Visit: http://localhost:3000/api/test-supabase
# 
# ================================================================

